<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Simulador - Lei do Bem (Lucro Real) | Specialità</title>
  <style>
    :root{
      --bg0:#070b14;
      --bg1:#0a1020;
      --card:#0b1328;
      --card2:#0a1124;
      --border:rgba(255,255,255,.08);
      --muted:rgba(255,255,255,.68);
      --text:rgba(255,255,255,.92);
      --title:rgba(255,255,255,.95);
      --pill:rgba(255,255,255,.06);
      --shadow: 0 20px 60px rgba(0,0,0,.45);
      --radius:18px;
      --radius2:14px;
      --focus: rgba(125, 211, 252, .45);
      --ok:#22c55e;
      --warn:#f59e0b;
      --bad:#ef4444;
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Helvetica Neue", Helvetica, sans-serif;
      color:var(--text);
      background:
        radial-gradient(1200px 700px at 25% 10%, rgba(56,189,248,.18), transparent 55%),
        radial-gradient(900px 600px at 80% 20%, rgba(99,102,241,.14), transparent 55%),
        linear-gradient(180deg, var(--bg0), var(--bg1));
      min-height:100vh;
      padding:34px 18px 56px;
    }

    .wrap{
      max-width:1180px;
      margin:0 auto;
    }

    header{
      display:flex;
      flex-direction:column;
      gap:10px;
      margin-bottom:18px;
    }
    .brand{
      letter-spacing:.2em;
      text-transform:uppercase;
      font-size:12px;
      color:rgba(255,255,255,.75);
    }
    h1{
      font-size:28px;
      line-height:1.15;
      margin:0;
      color:var(--title);
      font-weight:750;
    }
    .sub{
      color:rgba(255,255,255,.70);
      margin:0;
      font-size:14px;
      max-width:900px;
    }

    .top-actions{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin:14px 0 22px;
    }
    .btn{
      appearance:none;
      border:1px solid var(--border);
      background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      color:var(--text);
      padding:10px 14px;
      border-radius:12px;
      cursor:pointer;
      font-weight:650;
      font-size:13px;
      transition: transform .06s ease, border-color .2s ease, background .2s ease;
    }
    .btn:hover{border-color:rgba(255,255,255,.16)}
    .btn:active{transform:translateY(1px)}
    .btn.primary{
      border-color:rgba(56,189,248,.35);
      background:linear-gradient(180deg, rgba(56,189,248,.18), rgba(56,189,248,.08));
    }

    .grid{
      display:grid;
      grid-template-columns: 1.05fr .95fr;
      gap:18px;
    }
    @media (max-width: 980px){
      .grid{grid-template-columns:1fr}
    }

    .panel{
      background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
      border:1px solid var(--border);
      border-radius:var(--radius);
      box-shadow: 0 20px 60px rgba(0,0,0,.45);
      overflow:hidden;
    }
    .panel .hd{
      padding:16px 18px;
      border-bottom:1px solid var(--border);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
    }
    .panel .hd h2{
      margin:0;
      font-size:13px;
      letter-spacing:.12em;
      text-transform:uppercase;
      color:rgba(255,255,255,.72);
      font-weight:800;
    }
    .panel .bd{padding:16px 18px 18px}

    .section{
      background:rgba(0,0,0,.14);
      border:1px solid rgba(255,255,255,.07);
      border-radius:var(--radius2);
      padding:14px 14px 12px;
      margin-bottom:12px;
    }
    .section .stitle{
      display:flex;
      align-items:baseline;
      gap:8px;
      margin:0 0 10px;
      font-size:14px;
      color:rgba(255,255,255,.92);
      font-weight:800;
    }
    .section .stitle span{
      color:rgba(255,255,255,.60);
      font-weight:800;
      font-size:12px;
    }

    .row{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:12px;
    }
    @media (max-width: 520px){
      .row{grid-template-columns:1fr}
    }
    label{
      display:block;
      font-size:12px;
      color:rgba(255,255,255,.72);
      margin:0 0 7px;
      font-weight:650;
    }
    input, select{
      width:100%;
      padding:12px 12px;
      border-radius:12px;
      border:1px solid rgba(255,255,255,.10);
      background:rgba(7,10,20,.55);
      color:var(--text);
      outline:none;
      transition:border-color .15s ease, box-shadow .15s ease;
      font-weight:650;
    }
    input::placeholder{color:rgba(255,255,255,.35)}
    input:focus, select:focus{
      border-color:rgba(56,189,248,.35);
      box-shadow:0 0 0 4px var(--focus);
    }
    .hint{
      margin-top:7px;
      font-size:11.5px;
      color:rgba(255,255,255,.55);
      line-height:1.35;
    }

    .chips{
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      margin-top:10px;
    }
    .chip{
      border:1px solid rgba(255,255,255,.10);
      background:rgba(255,255,255,.05);
      border-radius:999px;
      padding:7px 10px;
      font-size:12px;
      color:rgba(255,255,255,.78);
      font-weight:750;
    }

    .note{
      margin-top:10px;
      padding-top:10px;
      border-top:1px dashed rgba(255,255,255,.14);
      color:rgba(255,255,255,.62);
      font-size:12px;
      line-height:1.45;
    }

    .card{
      background:rgba(0,0,0,.14);
      border:1px solid rgba(255,255,255,.07);
      border-radius:var(--radius2);
      padding:14px 14px 12px;
      margin-bottom:12px;
    }
    .card .k{
      font-size:12px;
      color:rgba(255,255,255,.70);
      margin:0 0 8px;
      font-weight:650;
    }
    .card .v{
      font-size:22px;
      margin:0;
      font-weight:900;
      color:rgba(255,255,255,.95);
    }
    .card .s{
      margin:6px 0 0;
      font-size:12px;
      color:rgba(255,255,255,.55);
      line-height:1.35;
    }
    .smallv{
      font-size:18px;
      font-weight:900;
    }

    .checks{
      margin-top:12px;
      padding-top:12px;
      border-top:1px solid rgba(255,255,255,.08);
    }
    .checks h3{
      margin:0 0 10px;
      font-size:12px;
      color:rgba(255,255,255,.70);
      letter-spacing:.02em;
      font-weight:800;
    }
    .check{
      display:flex;
      gap:10px;
      align-items:flex-start;
      padding:10px 12px;
      border-radius:12px;
      border:1px solid rgba(255,255,255,.08);
      background:rgba(255,255,255,.03);
      margin-bottom:10px;
    }
    .dot{
      width:10px; height:10px; border-radius:999px;
      margin-top:5px;
      background:var(--warn);
      box-shadow:0 0 0 4px rgba(0,0,0,.18);
      flex:0 0 auto;
    }
    .check.ok .dot{background:var(--ok)}
    .check.bad .dot{background:var(--bad)}
    .check p{
      margin:0;
      font-size:12.5px;
      color:rgba(255,255,255,.70);
      line-height:1.35;
      font-weight:650;
    }

    .footer-help{
      margin-top:14px;
      font-size:12px;
      color:rgba(255,255,255,.55);
      line-height:1.45;
    }

    @media print{
      body{background:#fff; color:#000; padding:0}
      .wrap{max-width:none}
      .panel{box-shadow:none}
      .btn,.top-actions{display:none !important}
      .brand{color:#000}
      h1,.sub{color:#000}
      .panel{border:1px solid #ddd}
      input,select{border:1px solid #ccc; background:#fff; color:#000}
      .section,.card{background:#fff; border:1px solid #eee}
      .check{background:#fff}
      .dot{box-shadow:none}
    }
  </style>
</head>

<body>
  <div class="wrap">
    <header>
      <div class="brand">SPECIALITÀ CONSULTORIA TRIBUTÁRIA</div>
      <h1>Simulador - Lei do Bem (Lucro Real)</h1>
      <p class="sub">Estimativa de exclusão adicional e economia fiscal (IRPJ + CSLL). Resultado indicativo, sujeito a validação técnica.</p>

      <div class="top-actions">
        <button class="btn primary" id="btnExemplo" type="button">Carregar exemplo</button>
        <button class="btn" id="btnLimpar" type="button">Limpar</button>
        <button class="btn" id="btnPrint" type="button">Imprimir / Salvar PDF</button>
      </div>
    </header>

    <div class="grid">
      <section class="panel" aria-label="Campos de preenchimento">
        <div class="hd">
          <h2>Campos de preenchimento</h2>
        </div>
        <div class="bd">
          <div class="section">
            <p class="stitle">1) Empresa <span></span></p>
            <div class="row">
              <div>
                <label for="razao">Razao social</label>
                <input id="razao" placeholder="Empresa Exemplo S.A." />
              </div>
              <div>
                <label for="cnpj">CNPJ</label>
                <input id="cnpj" placeholder="00.000.000/0001-00" />
              </div>
            </div>
            <div class="row" style="margin-top:12px">
              <div>
                <label for="email">E-mail responsavel</label>
                <input id="email" placeholder="financeiro@empresa.com" />
              </div>
              <div>
                <label for="regime">Regime tributario</label>
                <select id="regime">
                  <option value="lucro_real" selected>Lucro Real</option>
                  <option value="outro">Outro (nao aplicavel a este simulador)</option>
                </select>
              </div>
            </div>
          </div>

          <div class="section">
            <p class="stitle">2) Dispendios em PD&amp;I (ano-calendario) <span></span></p>
            <div class="row">
              <div>
                <label for="dispTotal">Dispendios elegiveis totais (R$)</label>
                <input id="dispTotal" inputmode="decimal" placeholder="Ex.: 1500000" />
                <div class="hint">Total de dispendios elegiveis (controle contabil e dossie tecnico).</div>
              </div>
              <div>
                <label for="dispPatente">Dispendios ligados a patente/cultivar (R$)</label>
                <input id="dispPatente" inputmode="decimal" placeholder="Ex.: 400000" />
                <div class="hint">Se nao houver, deixe 0.</div>
              </div>
            </div>
          </div>

          <div class="section" style="margin-bottom:0">
            <p class="stitle">3) Equipe de P&amp;D <span></span></p>
            <div class="row">
              <div>
                <label for="variacao">Variacao de pesquisadores exclusivos em P&amp;D</label>
                <select id="variacao">
                  <option value="0" selected>Nao houve aumento</option>
                  <option value="1">Houve aumento moderado</option>
                  <option value="2">Houve aumento relevante</option>
                </select>
                <div class="hint">Define o percentual de exclusao adicional base: 60% / 70% / 80%.</div>
              </div>
              <div>
                <label for="aliquota">Aliquota efetiva IRPJ + CSLL (%)</label>
                <input id="aliquota" inputmode="decimal" value="34" />
                <div class="hint">Padrao geral: 34% (ajustavel).</div>
              </div>
            </div>

            <div class="chips" aria-label="Resumo rapido">
              <div class="chip" id="chipPct">Pct. base: 60%</div>
              <div class="chip" id="chipExclusao">Exclusao total: -</div>
              <div class="chip" id="chipEconomia">Economia: -</div>
            </div>

            <div class="note">
              Nota: este simulador estima apenas a economia via <strong>exclusao adicional</strong> do IRPJ/CSLL (Lei do Bem).
              Beneficios como IPI, depreciacao/amortizacao acelerada e IRRF podem ser adicionados como modulos.
            </div>
          </div>
        </div>
      </section>

      <section class="panel" aria-label="Resultado">
        <div class="hd">
          <h2>Resultado</h2>
          <button class="btn primary" id="btnCalcular" type="button">Calcular</button>
        </div>
        <div class="bd">
          <div class="card">
            <div class="k">Percentual de exclusao adicional base</div>
            <p class="v" id="outPct">60%</p>
            <p class="s" id="outPctHint">Conforme faixa de aumento de pesquisadores</p>
          </div>

          <div class="card">
            <div class="k">Exclusao adicional base (R$)</div>
            <p class="v smallv" id="outBase">-</p>
            <p class="s">Dispendios totais x Pct. base</p>
          </div>

          <div class="card">
            <div class="k">Exclusao adicional por patente/cultivar (R$)</div>
            <p class="v smallv" id="outPatente">R$ 0,00</p>
            <p class="s">Dispendios com patente x 20%</p>
          </div>

          <div class="card">
            <div class="k">Exclusao total estimada (R$)</div>
            <p class="v" id="outTotal">-</p>
            <p class="s">Base + Patente</p>
          </div>

          <div class="card" style="margin-bottom:0">
            <div class="k">Economia fiscal estimada (IRPJ + CSLL) (R$)</div>
            <p class="v" id="outEconomia">-</p>
            <p class="s">Exclusao total x aliquota efetiva</p>
          </div>

          <div class="checks">
            <h3>Checks (para reduzir risco de erro de entrada)</h3>

            <div class="check ok" id="chkRegime">
              <span class="dot"></span>
              <p id="chkRegimeTxt">Regime: Lucro Real.</p>
            </div>

            <div class="check" id="chkDisp">
              <span class="dot"></span>
              <p id="chkDispTxt">Dispendios totais estao zerados ou nao informados. Preencha para calcular.</p>
            </div>

            <div class="check" id="chkAliq">
              <span class="dot"></span>
              <p id="chkAliqTxt">Aliquota efetiva nao informada. Use 34 como padrao, se aplicavel.</p>
            </div>

            <div class="footer-help">
              Se voce quiser, eu adapto este simulador para: (i) coletar leads (nome/CFO), (ii) enviar relatorio por e-mail,
              (iii) integrar com Google Sheets/CRM, (iv) publicar no Wix como pagina protegida da Specialita.
            </div>
          </div>
        </div>
      </section>
    </div>
  </div>

<script>
  const fmtBRL = (n) => {
    if (!isFinite(n)) return "-";
    return n.toLocaleString("pt-BR", { style: "currency", currency: "BRL" });
  };

  const parseNumber = (v) => {
    if (v === null || v === undefined) return 0;
    const s = String(v).trim()
      .replace(/\\s/g, "")
      .replace(/\\./g, "")
      .replace(/,/g, ".");
    const n = parseFloat(s);
    return isFinite(n) ? n : 0;
  };

  const pctFromVariacao = (variacao) => {
    if (variacao === "2") return 0.80;
    if (variacao === "1") return 0.70;
    return 0.60;
  };

  const pctHintFromVariacao = (variacao) => {
    if (variacao === "2") return "Aumento relevante de pesquisadores";
    if (variacao === "1") return "Aumento moderado de pesquisadores";
    return "Sem aumento de pesquisadores";
  };

  function updatePctUI(){
    const variacao = document.getElementById("variacao").value;
    const pct = pctFromVariacao(variacao);
    document.getElementById("outPct").textContent = Math.round(pct*100) + "%";
    document.getElementById("outPctHint").textContent = pctHintFromVariacao(variacao);
    document.getElementById("chipPct").textContent = "Pct. base: " + Math.round(pct*100) + "%";
  }

  function updateChecks(){
    const regime = document.getElementById("regime").value;
    const dispTotal = parseNumber(document.getElementById("dispTotal").value);
    const aliq = parseNumber(document.getElementById("aliquota").value);

    const chkRegime = document.getElementById("chkRegime");
    const chkRegimeTxt = document.getElementById("chkRegimeTxt");
    if (regime === "lucro_real"){
      chkRegime.classList.remove("bad");
      chkRegime.classList.add("ok");
      chkRegimeTxt.textContent = "Regime: Lucro Real.";
    } else {
      chkRegime.classList.remove("ok");
      chkRegime.classList.add("bad");
      chkRegimeTxt.textContent = "Regime selecionado nao e Lucro Real. Este simulador foi desenhado para Lucro Real.";
    }

    const chkDisp = document.getElementById("chkDisp");
    const chkDispTxt = document.getElementById("chkDispTxt");
    if (dispTotal > 0){
      chkDisp.classList.add("ok");
      chkDispTxt.textContent = "Dispendios totais informados.";
    } else {
      chkDisp.classList.remove("ok");
      chkDispTxt.textContent = "Dispendios totais estao zerados ou nao informados. Preencha para calcular.";
    }

    const chkAliq = document.getElementById("chkAliq");
    const chkAliqTxt = document.getElementById("chkAliqTxt");
    if (aliq > 0){
      chkAliq.classList.add("ok");
      chkAliqTxt.textContent = "Aliquota efetiva informada: " + aliq.toLocaleString("pt-BR") + "%.";
    } else {
      chkAliq.classList.remove("ok");
      chkAliqTxt.textContent = "Aliquota efetiva nao informada. Use 34 como padrao, se aplicavel.";
    }
  }

  function calcular(){
    updatePctUI();
    updateChecks();

    const variacao = document.getElementById("variacao").value;
    const dispTotal = parseNumber(document.getElementById("dispTotal").value);
    const dispPatente = parseNumber(document.getElementById("dispPatente").value);
    const aliq = parseNumber(document.getElementById("aliquota").value) || 34;

    const pctBase = pctFromVariacao(variacao);

    const exclusaoBase = dispTotal * pctBase;
    const exclusaoPatente = dispPatente * 0.20;
    const exclusaoTotal = exclusaoBase + exclusaoPatente;
    const economia = exclusaoTotal * (aliq / 100);

    document.getElementById("outBase").textContent = fmtBRL(exclusaoBase);
    document.getElementById("outPatente").textContent = fmtBRL(exclusaoPatente);
    document.getElementById("outTotal").textContent = fmtBRL(exclusaoTotal);
    document.getElementById("outEconomia").textContent = fmtBRL(economia);

    document.getElementById("chipExclusao").textContent = "Exclusao total: " + fmtBRL(exclusaoTotal);
    document.getElementById("chipEconomia").textContent = "Economia: " + fmtBRL(economia);
  }

  function limpar(){
    ["razao","cnpj","email","dispTotal","dispPatente"].forEach(id => document.getElementById(id).value = "");
    document.getElementById("regime").value = "lucro_real";
    document.getElementById("variacao").value = "0";
    document.getElementById("aliquota").value = "34";

    document.getElementById("outBase").textContent = "-";
    document.getElementById("outPatente").textContent = "R$ 0,00";
    document.getElementById("outTotal").textContent = "-";
    document.getElementById("outEconomia").textContent = "-";
    document.getElementById("chipExclusao").textContent = "Exclusao total: -";
    document.getElementById("chipEconomia").textContent = "Economia: -";

    updatePctUI();
    updateChecks();
  }

  function exemplo(){
    document.getElementById("razao").value = "Empresa Exemplo S.A.";
    document.getElementById("cnpj").value = "00.000.000/0001-00";
    document.getElementById("email").value = "financeiro@empresa.com";
    document.getElementById("regime").value = "lucro_real";

    document.getElementById("dispTotal").value = "1500000";
    document.getElementById("dispPatente").value = "400000";
    document.getElementById("variacao").value = "1";
    document.getElementById("aliquota").value = "34";
    calcular();
  }

  document.getElementById("btnCalcular").addEventListener("click", calcular);
  document.getElementById("btnLimpar").addEventListener("click", limpar);
  document.getElementById("btnExemplo").addEventListener("click", exemplo);
  document.getElementById("btnPrint").addEventListener("click", () => window.print());

  ["variacao","regime","dispTotal","dispPatente","aliquota"].forEach(id=>{
    document.getElementById(id).addEventListener("input", () => { updatePctUI(); updateChecks(); });
    document.getElementById(id).addEventListener("change", () => { updatePctUI(); updateChecks(); });
  });

  updatePctUI();
  updateChecks();
</script>
</body>
</html>
